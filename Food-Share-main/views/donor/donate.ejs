<main>
  <%- include('../partials/donorSidebar') %>

  <div id="main-wrapper">

    <!-- Page Header -->
    <div class="bg-white shadow-sm p-3 d-flex align-items-center justify-content-between">
      <span id="sidebar-toggler-btn" class="fs-5"><i class="fas fa-bars"></i></span>
      <h5 class="m-0 color-theme">Donate</h5>
    </div>

    <!-- Donation Form -->
    <form action="/donor/donate" method="POST" class="container border my-4 p-4 bg-white rounded-3 shadow-sm">

      <div class="mb-3">
        <label for="food" class="form-label">Food Type</label>
        <input type="text" name="donation[foodType]" class="form-control" id="food" placeholder="e.g., Rice, Bread, Fruits" required autofocus>
      </div>

      <div class="row">
        <div class="mb-3 col-md-6">
          <label for="quantity" class="form-label">Quantity</label>
          <input type="text" name="donation[quantity]" class="form-control" id="quantity" placeholder="e.g., 10 plates, 5 kg" required>
        </div>
        <div class="mb-3 col-md-6">
          <label for="time" class="form-label">Time of Cooking</label>
          <input type="datetime-local" name="donation[cookingTime]" class="form-control" id="time" required>
        </div>
      </div>

      <div class="row">
        <div class="mb-3 col-md-8">
          <label for="address" class="form-label">Pickup Address</label>
          <input type="text" name="donation[address]" class="form-control" id="address" value="<%= currentUser.address %>" required>
        </div>
        <div class="mb-3 col-md-4">
          <label for="phone" class="form-label">Phone Number</label>
          <input type="tel" name="donation[phone]" class="form-control" id="phone" value="<%= currentUser.phone %>" required pattern="[0-9]{10}">
        </div>
      </div>

      <div class="mb-3">
        <label for="msg" class="form-label">Message to Admin (Optional)</label>
        <textarea name="donation[donorToAdminMsg]" class="form-control" id="msg" rows="3" placeholder="You can include any additional info here..."></textarea>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-primary px-5">Submit Donation</button>
      </div>

    </form>

  </div>
</main>

<script>
  const d = new Date();
  const dateString = d.toISOString().slice(0, 16); // Sets format: yyyy-MM-ddThh:mm
  document.getElementById("time").value = dateString;
</script>
