<main>
  <%- include('../partials/donorSidebar') %>

  <div id="main-wrapper">
    <!-- Page Header -->
    <div class="bg-white shadow-sm p-3 d-flex align-items-center justify-content-between">
      <span id="sidebar-toggler-btn" class="fs-5"><i class="fas fa-bars"></i></span>
      <h5 class="m-0 color-theme">Previous Donations</h5>
    </div>

    <!-- Table Wrapper -->
    <div class="table-responsive col col-sm-10 col-12 m-auto my-4">
      <% if (previousDonations.length === 0) { %>
        <div class="alert alert-info text-center">You have not made any donations yet.</div>
      <% } else { %>
        <table class="table table-striped table-hover align-middle text-center bg-white shadow-sm rounded">
          <thead class="table-info">
            <tr>
              <th>#</th>
              <th>Food Type</th>
              <th>Quantity</th>
              <th>Status</th>
              <th>Cooking Time</th>
              <th>Agent Assigned</th>
              <th>Collected On</th>
            </tr>
          </thead>
          <tbody>
            <% for (let i = 0; i < previousDonations.length; i++) { %>
              <tr>
                <th scope="row"><%= i + 1 %></th>
                <td><%= previousDonations[i].foodType %></td>
                <td><%= previousDonations[i].quantity %></td>
                <td>
                  <span class="badge 
                    <% if (previousDonations[i].status === 'collected') { %> bg-success 
                    <% } else if (previousDonations[i].status === 'assigned') { %> bg-primary 
                    <% } else { %> bg-secondary <% } %>">
                    <%= previousDonations[i].status.charAt(0).toUpperCase() + previousDonations[i].status.slice(1) %>
                  </span>
                </td>
                <td><%= previousDonations[i].cookingTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short" }) %></td>
                <td><%= previousDonations[i].agent.firstName + " " + previousDonations[i].agent.lastName %></td>
                <td><%= previousDonations[i].collectionTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short" }) %></td>
              </tr>
            <% } %>
          </tbody>
        </table>
      <% } %>
    </div>
  </div>
</main>
